<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>INDICAKOPI - Detail Merchandise</title>

  <!-- Font Google -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;300;400;700&display=swap" rel="stylesheet" />

  <!-- Feather Icons -->
  <script src="https://unpkg.com/feather-icons"></script>

  <!-- Style CSS -->
  <link rel="stylesheet" href="../css/style.css">
  <link rel="stylesheet" href="../css/mobile.css">
  <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
</head>

<body class="font-['Poppins'] bg-[#010101]">
  <!-- Navbar Start -->
  <nav class="navbar bg-[#010101] flex flex-col md:flex-row justify-between items-center px-4 md:px-8 py-4 fixed top-0 left-0 right-0 z-50 shadow-md">
    <div class="w-full md:w-auto flex justify-between items-center">
      <a href="../index.html" class="navbar-logo text-white text-xl md:text-2xl font-bold italic">INDICA<span class="text-[#5d5d5d]">KOPI</span></a>
      
      <div class="navbar-extra flex gap-4 md:hidden">
        <a href="#" id="search-mobile" class="text-white hover:text-[#5d5d5d] transition duration-300"><i data-feather="search"></i></a>
        <a href="#" id="shopping-cart-mobile" class="text-white hover:text-[#5d5d5d] transition duration-300"><i data-feather="shopping-cart"></i></a>
        <button id="hamburger-menu" class="text-white hover:text-[#5d5d5d] transition duration-300" aria-label="Menu"><i data-feather="menu"></i></button>
      </div>
    </div>

    <div class="navbar-nav hidden md:flex w-full md:w-auto flex-col md:flex-row items-center gap-4 md:gap-8 pb-4 md:pb-0 bg-[#010101]">
      <a href="../index.html#home" class="text-white hover:text-[#5d5d5d] transition duration-300 py-2 md:py-0 w-full md:w-auto text-center">Home</a>
      <a href="../index.html#about" class="text-white hover:text-[#5d5d5d] transition duration-300 py-2 md:py-0 w-full md:w-auto text-center">Tentang kami</a>
      <a href="menu.html" class="text-white hover:text-[#5d5d5d] transition duration-300 py-2 md:py-0 w-full md:w-auto text-center">Menu</a>
      <a href="merch.html" class="text-white hover:text-[#5d5d5d] transition duration-300 py-2 md:py-0 w-full md:w-auto text-center">Merch</a>
      <a href="../index.html#contact" class="text-white hover:text-[#5d5d5d] transition duration-300 py-2 md:py-0 w-full md:w-auto text-center">Kontak</a>
    </div>

    <div class="navbar-extra hidden md:flex gap-4">
      <a href="#" id="search" class="text-white hover:text-[#5d5d5d] transition duration-300"><i data-feather="search"></i></a>
      <a href="#" id="shopping-cart" class="text-white hover:text-[#5d5d5d] transition duration-300"><i data-feather="shopping-cart"></i></a>
    </div>
  </nav>
  <!-- Navbar End -->

  <!-- Merchandise Detail section start -->
  <section class="merch-detail py-24 px-6">
    <div class="max-w-6xl mx-auto">
      <!-- Back button -->
      <a href="merch.html" class="inline-flex items-center text-[#5d5d5d] hover:text-[#9a7349] transition duration-300 mb-8">
        <i data-feather="arrow-left" class="mr-2"></i>
        <span>Kembali ke Merchandise</span>
      </a>

      <!-- Product detail container -->
      <div id="product-detail" class="grid grid-cols-1 lg:grid-cols-2 gap-12">
        <!-- Content will be loaded dynamically -->
      </div>

      <!-- Related products -->
      <div class="mt-20">
        <h2 class="text-3xl font-bold text-white mb-8">Produk <span class="text-[#5d5d5d]">Lainnya</span></h2>
        <div id="related-products" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
          <!-- Related products will be loaded dynamically -->
        </div>
      </div>
    </div>
  </section>
  <!-- Merchandise Detail section end -->

  <!-- footer start -->
  <footer class="bg-[#0a0a0a] text-white py-10 px-6">
    <div class="socials flex justify-center gap-6 mb-6">
      <a href="https://instagram.com/indica.kopi" target="_blank" rel="noopener noreferrer" class="text-white hover:text-[#5d5d5d] transition duration-300"><i data-feather="instagram"></i></a>
      <a href="https://wa.me/62895629351010?text=Halo%20Indica%20Kopi" target="_blank" rel="noopener noreferrer" class="text-white hover:text-[#5d5d5d] transition duration-300"><i data-feather="message-circle"></i></a>
    </div>

    <div class="links flex justify-center gap-6 mb-6">
      <a href="../index.html#home" class="text-white hover:text-[#5d5d5d] transition duration-300">Home</a>
      <a href="../index.html#about" class="text-white hover:text-[#5d5d5d] transition duration-300">Tentang kami</a>
      <a href="../index.html#menu" class="text-white hover:text-[#5d5d5d] transition duration-300">Menu</a>
      <a href="../index.html#contact" class="text-white hover:text-[#5d5d5d] transition duration-300">Kontak</a>
    </div>

    <div class="credit text-center">
      <p>Created by <a href="" class="text-[#5d5d5d] hover:underline">Kelompok 5</a>. | &copy; 2025</p>
    </div>
  </footer>
  <!-- footer end -->

  <!-- Feather Icons -->
  <script>
    feather.replace();
  </script>

  <!-- Merchandise data -->
  <script src="../js/merch-data.js"></script>

  <!-- Component loader -->
  <script src="../js/components.js"></script>

  <!-- Load product detail -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // Initialize mobile menu
      ComponentLoader.initMobileMenu();

      // Get product ID from URL
      const urlParams = new URLSearchParams(window.location.search);
      const productId = urlParams.get('id');

      if (!productId) {
        window.location.href = 'merch.html';
        return;
      }

      const product = getMerchandiseById(productId);
      
      if (!product) {
        window.location.href = 'merch.html';
        return;
      }

      // Render product detail
      renderProductDetail(product);

      // Render related products
      renderRelatedProducts(product.id, product.category);

      // Re-initialize feather icons
      setTimeout(() => {
        if (window.feather) {
          feather.replace();
        }
      }, 100);
    });

    function renderProductDetail(product) {
      const container = document.getElementById('product-detail');
      const productImages = product.images || [product.image, product.image, product.image];
      
      container.innerHTML = `
        <!-- Product Image Carousel -->
        <div class="product-image">
          <div class="relative">
            <!-- Main Image Display -->
            <div class="carousel-container relative overflow-hidden rounded-lg shadow-2xl aspect-square">
              <div class="carousel-track flex transition-transform duration-500 ease-in-out h-full" id="carousel-track">
                ${productImages.map((img, index) => `
                  <img src="${img}" alt="${product.name} - Image ${index + 1}" class="w-full h-full flex-shrink-0 object-contain bg-[#1a1a1a]" data-index="${index}">
                `).join('')}
              </div>
            </div>
            
            <!-- Navigation Arrows -->
            <button id="prev-btn" class="absolute left-2 top-1/2 -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white p-3 rounded-full transition duration-300 z-10">
              <i data-feather="chevron-left" class="w-6 h-6"></i>
            </button>
            <button id="next-btn" class="absolute right-2 top-1/2 -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white p-3 rounded-full transition duration-300 z-10">
              <i data-feather="chevron-right" class="w-6 h-6"></i>
            </button>
            
            <!-- Indicators -->
            <div class="flex justify-center gap-2 mt-4">
              ${productImages.map((_, index) => `
                <button class="carousel-indicator w-3 h-3 rounded-full transition-all duration-300 ${index === 0 ? 'bg-[#5d5d5d] w-8' : 'bg-gray-500'}" data-index="${index}"></button>
              `).join('')}
            </div>
          </div>
          
          <!-- Thumbnail Gallery -->
          <div class="grid grid-cols-3 gap-3 mt-4">
            ${productImages.map((img, index) => `
              <button class="thumbnail-btn border-2 ${index === 0 ? 'border-[#5d5d5d]' : 'border-transparent'} rounded-lg overflow-hidden hover:border-[#5d5d5d] transition duration-300" data-index="${index}">
                <img src="${img}" alt="Thumbnail ${index + 1}" class="w-full h-24 object-cover">
              </button>
            `).join('')}
          </div>
          
          ${product.colors ? `
            <div class="mt-6">
              <p class="text-gray-400 mb-2">Tersedia dalam warna:</p>
              <div class="flex gap-3">
                ${product.colors.map(color => `
                  <span class="px-4 py-2 bg-[#1a1a1a] text-white rounded-md text-sm">${color}</span>
                `).join('')}
              </div>
            </div>
          ` : ''}
          ${product.roastLevels ? `
            <div class="mt-6">
              <p class="text-gray-400 mb-2">Tingkat roasting:</p>
              <div class="flex gap-3">
                ${product.roastLevels.map(level => `
                  <span class="px-4 py-2 bg-[#1a1a1a] text-white rounded-md text-sm">${level}</span>
                `).join('')}
              </div>
            </div>
          ` : ''}
        </div>

        <!-- Product Info -->
        <div class="product-info">
          <div class="mb-4">
            <span class="inline-block px-4 py-1 bg-[#5d5d5d] text-white text-sm rounded-full">${product.category}</span>
          </div>
          
          <h1 class="text-4xl font-bold text-white mb-4">${product.name}</h1>
          
          <div class="flex items-baseline gap-4 mb-6">
            <span class="text-5xl font-bold text-[#5d5d5d]">${product.price}</span>
            <span class="text-gray-400">
              <i data-feather="package" class="inline w-4 h-4"></i>
              Stok: ${product.stock} tersedia
            </span>
          </div>

          <p class="text-gray-300 text-lg mb-8">${product.detailedDescription}</p>

          <!-- Features -->
          <div class="mb-8">
            <h3 class="text-2xl font-semibold text-white mb-4">Fitur & Spesifikasi</h3>
            <ul class="space-y-3">
              ${product.features.map(feature => `
                <li class="flex items-start text-gray-300">
                  <i data-feather="check-circle" class="text-[#5d5d5d] mr-3 flex-shrink-0 mt-1"></i>
                  <span>${feature}</span>
                </li>
              `).join('')}
            </ul>
          </div>

          ${product.includes ? `
            <div class="mb-8">
              <h3 class="text-2xl font-semibold text-white mb-4">Isi Paket</h3>
              <div class="grid grid-cols-2 gap-3">
                ${product.includes.map(item => `
                  <div class="flex items-center bg-[#1a1a1a] p-3 rounded-lg">
                    <i data-feather="box" class="text-[#5d5d5d] mr-2"></i>
                    <span class="text-gray-300 text-sm">${item}</span>
                  </div>
                `).join('')}
              </div>
            </div>
          ` : ''}

          <!-- Action buttons -->
          <div class="flex gap-4">
            <a href="https://wa.me/6281234567890?text=Halo%20saya%20tertarik%20dengan%20${encodeURIComponent(product.name)}" 
               target="_blank"
               class="flex-1 bg-[#5d5d5d] text-white px-8 py-4 rounded-lg font-semibold hover:bg-[#9a7349] transition duration-300 flex items-center justify-center">
              <i data-feather="message-circle" class="mr-2"></i>
              Pesan via WhatsApp
            </a>
            <button class="bg-[#1a1a1a] text-white px-6 py-4 rounded-lg hover:bg-[#2a2a2a] transition duration-300">
              <i data-feather="heart"></i>
            </button>
            <button class="bg-[#1a1a1a] text-white px-6 py-4 rounded-lg hover:bg-[#2a2a2a] transition duration-300">
              <i data-feather="share-2"></i>
            </button>
          </div>

          <!-- Additional info -->
          <div class="mt-8 p-6 bg-[#1a1a1a] rounded-lg">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-center">
              <div>
                <i data-feather="truck" class="text-[#5d5d5d] mx-auto mb-2"></i>
                <p class="text-gray-400 text-sm">Pengiriman ke seluruh Indonesia</p>
              </div>
              <div>
                <i data-feather="shield" class="text-[#5d5d5d] mx-auto mb-2"></i>
                <p class="text-gray-400 text-sm">Garansi kualitas produk</p>
              </div>
              <div>
                <i data-feather="credit-card" class="text-[#5d5d5d] mx-auto mb-2"></i>
                <p class="text-gray-400 text-sm">Pembayaran aman</p>
              </div>
            </div>
          </div>
        </div>
      `;
      
      // Initialize carousel functionality
      initCarousel();
    }
    
    function initCarousel() {
      const track = document.getElementById('carousel-track');
      const prevBtn = document.getElementById('prev-btn');
      const nextBtn = document.getElementById('next-btn');
      const indicators = document.querySelectorAll('.carousel-indicator');
      const thumbnails = document.querySelectorAll('.thumbnail-btn');
      const images = track.querySelectorAll('img');
      let currentIndex = 0;
      
      function updateCarousel(index) {
        currentIndex = index;
        const offset = -index * 100;
        track.style.transform = `translateX(${offset}%)`;
        
        // Update indicators
        indicators.forEach((indicator, i) => {
          if (i === index) {
            indicator.classList.add('bg-[#5d5d5d]', 'w-8');
            indicator.classList.remove('bg-gray-500');
          } else {
            indicator.classList.remove('bg-[#5d5d5d]', 'w-8');
            indicator.classList.add('bg-gray-500');
          }
        });
        
        // Update thumbnails
        thumbnails.forEach((thumb, i) => {
          if (i === index) {
            thumb.classList.add('border-[#5d5d5d]');
            thumb.classList.remove('border-transparent');
          } else {
            thumb.classList.remove('border-[#5d5d5d]');
            thumb.classList.add('border-transparent');
          }
        });
      }
      
      // Previous button
      prevBtn.addEventListener('click', () => {
        const newIndex = currentIndex > 0 ? currentIndex - 1 : images.length - 1;
        updateCarousel(newIndex);
      });
      
      // Next button
      nextBtn.addEventListener('click', () => {
        const newIndex = currentIndex < images.length - 1 ? currentIndex + 1 : 0;
        updateCarousel(newIndex);
      });
      
      // Indicators
      indicators.forEach((indicator, index) => {
        indicator.addEventListener('click', () => {
          updateCarousel(index);
        });
      });
      
      // Thumbnails
      thumbnails.forEach((thumb, index) => {
        thumb.addEventListener('click', () => {
          updateCarousel(index);
        });
      });
      
      // Keyboard navigation
      document.addEventListener('keydown', (e) => {
        if (e.key === 'ArrowLeft') {
          prevBtn.click();
        } else if (e.key === 'ArrowRight') {
          nextBtn.click();
        }
      });
      
      // Auto-play (optional - commented out)
      // setInterval(() => {
      //   nextBtn.click();
      // }, 5000);
    }

    function renderRelatedProducts(currentId, category) {
      const container = document.getElementById('related-products');
      const relatedItems = getAllMerchandise()
        .filter(item => item.id !== parseInt(currentId))
        .slice(0, 3);

      container.innerHTML = relatedItems.map(item => `
        <div class="bg-[#1a1a1a] rounded-lg overflow-hidden shadow-lg hover:shadow-2xl transition duration-300">
          <img src="${item.image}" alt="${item.name}" class="w-full h-48 object-cover">
          <div class="p-6">
            <h3 class="text-white text-xl font-semibold mb-2">${item.name}</h3>
            <p class="text-gray-400 mb-4 line-clamp-2">${item.description}</p>
            <div class="flex justify-between items-center">
              <span class="text-[#5d5d5d] text-xl font-bold">${item.price}</span>
              <a href="merch-detail.html?id=${item.id}" class="bg-[#5d5d5d] text-white px-4 py-2 rounded-md font-semibold hover:bg-[#9a7349] transition duration-300">Detail</a>
            </div>
          </div>
        </div>
      `).join('');
    }
  </script>

  <!-- ini javascriptnya -->
  <script src="../js/script.js"></script>
</body>

</html>
